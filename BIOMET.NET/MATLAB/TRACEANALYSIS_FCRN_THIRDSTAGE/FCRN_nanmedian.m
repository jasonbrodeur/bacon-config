	function y = mynanmedian(x); %	y = mynanmedian(x); %	mynanmedian calculates the median of a vector or %	a 2D matrix, treating NaN elements as missing. 	if isempty(x); y = NaN; return; end; 		fYaN=~isnan(x); 	nYaN=sum(fYaN); 	y=NaN*ones(size(nYaN)); 		% sort each column so the middle not-missing element can be identified.	x = sort(x); 	[m,n] = size(x); 	%	Identify columns as containing %	an odd number of non-missing data.	%	an even number of non-missing data, %	or no non-missing data. %	and then assign medians from column analysis.	iOdd=find(mod(nYaN,2)==1); 	j=(nYaN(iOdd)+1)/2 + (iOdd-1)*m; 	y(iOdd)=x(j); 	iEven=find(mod(nYaN,2)==0 & nYaN>0); 	j=nYaN(iEven)/2 + (iEven-1)*m; 	y(iEven)=(x(j)+x(j+1))/2; 		iNone=sum(fYaN)==0; 	y(iNone)=NaN; 